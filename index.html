<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Typing Thunder</title>
  <script src="https://cdn.tailwindcss.com"></script>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.24.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
<style>
  @keyframes border-glow {
    0% { border-color: rgba(56, 189, 248, 0.3); box-shadow: 0 0 10px rgba(56, 189, 248, 0.2), 0 8px 32px 0 rgba(0, 0, 0, 0.37); }
    33% { border-color: rgba(168, 85, 247, 0.3); box-shadow: 0 0 10px rgba(168, 85, 247, 0.2), 0 8px 32px 0 rgba(0, 0, 0, 0.37); }
    66% { border-color: rgba(217, 70, 239, 0.3); box-shadow: 0 0 10px rgba(217, 70, 239, 0.2), 0 8px 32px 0 rgba(0, 0, 0, 0.37); }
    100% { border-color: rgba(56, 189, 248, 0.3); box-shadow: 0 0 10px rgba(56, 189, 248, 0.2), 0 8px 32px 0 rgba(0, 0, 0, 0.37); }
  }
  .glass-panel {
    background: rgba(15, 23, 42, 0.6); /* slate-900/60 */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid;
    border-radius: 1rem;
    animation: border-glow 6s ease-in-out infinite;
    transition: border-color 0.5s ease;
  }

  .btn {
    padding: 0.75rem 2rem;
    border-radius: 0.5rem;
    font-weight: bold;
    font-size: 1.125rem;
    color: #082f49;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.2), inset 0 1px 1px rgba(255,255,255,0.2);
    transition: all 0.2s ease-in-out;
    transform: translateY(0);
  }
  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -4px rgba(0, 0, 0, 0.2), inset 0 1px 1px rgba(255,255,255,0.2);
    filter: brightness(1.1);
  }
  .btn:active {
    transform: translateY(1px);
    box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.4);
    filter: brightness(0.9);
  }
  .btn.disabled, .btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 1px 1px rgba(255,255,255,0.3);
    filter: grayscale(0.5);
  }

  /* Active state for preset buttons */
  .btn-preset-active {
    transform: translateY(1px) !important;
    box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.4) !important;
    filter: brightness(0.9) !important;
  }

  .btn-green { background-image: linear-gradient(to top, #15803d, #22c55e); } /* green-700 to green-500 */
  .btn-yellow { background-image: linear-gradient(to top, #a16207, #eab308); } /* yellow-700 to yellow-500 */
  .btn-red { background-image: linear-gradient(to top, #b91c1c, #ef4444); } /* red-700 to red-500 */
  .btn-fuchsia { background-image: linear-gradient(to top, #a21caf, #d946ef); } /* fuchsia-700 to fuchsia-500 */
  .btn-sky { background-image: linear-gradient(to top, #0369a1, #0ea5e9); } /* sky-700 to sky-500 */
  .btn-violet { background-image: linear-gradient(to top, #6d28d9, #8b5cf6); } /* violet-700 to violet-600 */
  .btn-cyan { background-image: linear-gradient(to top, #0e7490, #06b6d4); } /* cyan-700 to cyan-600 */
  .btn-slate { background-image: linear-gradient(to top, #334155, #475569); color: white; } /* slate-700 to slate-600 */

  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    background: rgba(15, 23, 42, 0.7);
    border-radius: 5px;
    outline: none;
    border: 1px solid #38bdf844;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: #0ea5e9;
    cursor: pointer;
    border-radius: 50%;
    border: 2px solid #fff;
    box-shadow: 0 0 10px #0ea5e9;
    transition: background-color 0.2s ease;
  }
  input[type="range"]::-webkit-slider-thumb:hover {
    background-color: #38bdf8;
  }

  /* New Toggle Switch Styles */
  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
  }
  .toggle-switch input { 
    opacity: 0;
    width: 0;
    height: 0;
  }
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #334155; /* slate-700 */
    transition: .4s;
    border-radius: 34px;
    border: 1px solid #475569; /* slate-600 */
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  input:checked + .slider {
    background-color: #dc2626; /* red-600 */
    box-shadow: 0 0 10px #ef4444; /* red-500 */
  }
  input:focus + .slider {
    box-shadow: 0 0 1px #dc2626;
  }
  input:checked + .slider:before {
    transform: translateX(26px);
  }


  @keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
    40%, 60% { transform: translate3d(4px, 0, 0); }
  }
  .animate-shake {
    animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
  }
  @keyframes shake-short {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-3px, 0, 0); }
    40%, 60% { transform: translate3d(3px, 0, 0); }
  }
  .animate-shake-short {
    animation: shake-short 0.4s cubic-bezier(.36,.07,.19,.97);
  }
  @keyframes score-pop {
      0% { transform: scale(1) translateY(0); }
      50% { transform: scale(1.3) translateY(-3px); }
      100% { transform: scale(1) translateY(0); }
  }
  .animate-score-pop {
      display: inline-block;
      animation: score-pop 0.3s ease-in-out;
  }
  @keyframes level-up {
      0% { opacity: 0; transform: translateY(20px) scale(0.8) rotate(-5deg); }
      20% { opacity: 1; transform: translateY(0) scale(1.1) rotate(2deg); }
      80% { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
      100% { opacity: 0; transform: translateY(-20px) scale(0.8) rotate(5deg); }
  }
  .animate-level-up {
      animation: level-up 1.5s ease-in-out forwards;
  }
  @keyframes letter-pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.5); } /* Increased from 1.4 */
      100% { transform: scale(1); }
  }
  .animate-letter-pop {
      display: inline-block; /* Required for transform */
      animation: letter-pop 0.2s ease-out;
  }
  @keyframes explode-particle {
    0% {
        transform: translate(-50%, -50%) scale(var(--s, 1));
        opacity: 1;
    }
    100% {
        transform: translate(var(--x), var(--y)) scale(0);
        opacity: 0;
    }
  }
  .animate-explode-particle {
    animation-name: explode-particle;
    animation-duration: var(--duration, 0.6s);
    animation-delay: var(--delay, 0s);
    animation-timing-function: ease-out;
    animation-fill-mode: forwards;
  }
  @keyframes float-up {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-60px); opacity: 0; }
  }
  .animate-float-up {
      animation: float-up 1s ease-out forwards;
      pointer-events: none;
  }
  @keyframes combo-pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.3) rotate(5deg); }
      100% { transform: scale(1) rotate(0deg); }
  }
  .animate-combo-pop {
      animation: combo-pop 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
  }
  @keyframes combo-glow-red {
    0% { text-shadow: 0 0 10px #ef4444, 0 0 20px #ef4444; }
    50% { text-shadow: 0 0 20px #ef4444, 0 0 40px #ef4444; }
    100% { text-shadow: 0 0 10px #ef4444, 0 0 20px #ef4444; }
  }
  .animate-combo-glow-red {
      animation: combo-glow-red 1.5s ease-in-out infinite;
  }
  @keyframes shrink-pulse {
    0%, 100% { transform: rotate(10deg) scale(1); }
    50% { transform: rotate(10deg) scale(0.9); }
  }
  .animate-shrink-pulse {
    animation: shrink-pulse 4s ease-in-out infinite;
  }
  @keyframes rainbow-flow {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
  }
  .rainbow-text {
    background: linear-gradient(to right, #ef4444, #f97316, #eab308, #84cc16, #22c55e, #14b8a6, #06b6d4, #3b82f6, #8b5cf6, #d946ef, #ef4444);
    background-size: 200% auto;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: rainbow-flow 3s linear infinite;
  }
  @keyframes pulse-glow-cyan {
    0%, 100% { box-shadow: 0 0 5px #06b6d4, 0 0 10px #06b6d4, 0 0 0 1px rgba(6, 182, 212, 0.5); }
    50% { box-shadow: 0 0 15px #06b6d4, 0 0 25px #06b6d4, 0 0 0 1px rgba(6, 182, 212, 0.5); }
  }
  .animate-pulse-glow-cyan {
    animation: pulse-glow-cyan 2s ease-in-out infinite;
  }
  @keyframes wipe-clean {
    0% { transform: translateY(100%); opacity: 0.9; }
    40% { transform: translateY(0%); opacity: 1; }
    100% { transform: translateY(-100%); opacity: 0; }
  }
  .animate-wipe-clean {
      animation: wipe-clean 0.8s ease-in-out forwards;
  }
  @keyframes time-stop-bg {
    0% { backdrop-filter: grayscale(0); opacity: 0; }
    20% { backdrop-filter: grayscale(1); opacity: 1; }
    80% { backdrop-filter: grayscale(1); opacity: 1; }
    100% { backdrop-filter: grayscale(0); opacity: 0; }
  }
  .animate-time-stop-bg {
      animation: time-stop-bg 2s ease-in-out forwards;
  }
  @keyframes broken-heart {
      0% { transform: scale(1); opacity: 1; }
      20% { transform: scale(1.3); } /* Pop */
      100% { transform: scale(0.5); opacity: 0; }
  }
  .animate-broken-heart {
      animation: broken-heart 2s cubic-bezier(0.6, -0.28, 0.735, 0.045) forwards;
  }
  @keyframes streak-text {
      0% { opacity: 0; transform: scale(0.5) translateY(50px); }
      20% { opacity: 1; transform: scale(1.1) translateY(0); }
      80% { opacity: 1; transform: scale(1) translateY(0); }
      100% { opacity: 0; transform: scale(0.8) translateY(-50px); }
  }
  .animate-streak-text {
      animation: streak-text 2s ease-in-out forwards;
  }
  @keyframes timing-bonus-pop {
    0% { opacity: 0; transform: scale(0.5) rotate(-15deg); }
    30% { opacity: 1; transform: scale(1.3) rotate(5deg); }
    80% { opacity: 1; transform: scale(1.1) rotate(0deg); }
    100% { opacity: 0; transform: scale(0.9) rotate(10deg); }
  }
  .animate-timing-bonus-pop {
    animation: timing-bonus-pop 1s cubic-bezier(0.18, 0.89, 0.32, 1.28);
  }
  
  @keyframes wave-alert-intense {
    0% { opacity: 0; transform: scale(0.8) skewX(-15deg); text-shadow: 0 0 10px #ef4444; }
    20% { opacity: 1; transform: scale(1.1) skewX(-15deg); text-shadow: 0 0 30px #ef4444, 0 0 50px #ef4444; }
    80% { opacity: 1; transform: scale(1) skewX(-15deg); text-shadow: 0 0 20px #ef4444, 0 0 40px #ef4444; }
    100% { opacity: 0; transform: scale(0.8) skewX(-15deg); text-shadow: 0 0 10px #ef4444; }
  }
  .animate-wave-alert-intense {
    animation: wave-alert-intense 2s ease-in-out forwards;
  }

  @keyframes screen-shake-subtle {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-1px); }
    20%, 40%, 60%, 80% { transform: translateX(1px); }
  }
  .animate-screen-shake-subtle {
      animation: screen-shake-subtle 2s ease-in-out forwards;
  }

  @keyframes screen-shake-continuous {
    0%, 100% { transform: translate(0, 0); }
    25% { transform: translate(0.5px, -0.5px); }
    50% { transform: translate(-0.5px, 0.5px); }
    75% { transform: translate(0.5px, 0.5px); }
  }
  .animate-screen-shake-continuous {
    animation: screen-shake-continuous 0.3s linear infinite;
  }

  @keyframes boss-health-hit {
    0%, 100% { transform: scaleX(1); }
    50% { transform: scaleX(0.98); }
  }
  .animate-boss-health-hit {
    animation: boss-health-hit 0.3s ease-in-out;
  }

  @keyframes boss-timer-pulse {
    0%, 100% { text-shadow: 0 0 10px #ef4444; }
    50% { text-shadow: 0 0 20px #ef4444, 0 0 30px #ef4444; }
  }
  .animate-boss-timer-pulse {
    animation: boss-timer-pulse 1s ease-in-out infinite;
  }

  @keyframes text-glitch {
    0% { transform: translate(0); text-shadow: none; }
    20% { transform: translate(-2px, 1px); text-shadow: 1px 0 #ef4444, -1px 0 #06b6d4; }
    40% { transform: translate(1px, -1px); text-shadow: -1px 0 #ef4444, 1px 0 #06b6d4; }
    60% { transform: translate(2px, 1px); text-shadow: 1px 0 #ef4444, -1px 0 #06b6d4; }
    80% { transform: translate(-1px, -1px); text-shadow: -1px 0 #ef4444, 1px 0 #06b6d4; }
    100% { transform: translate(0); text-shadow: none; }
  }
  .animate-glitch {
      animation: text-glitch 0.2s linear;
  }

  @keyframes level-clear-text-anim {
      0% { opacity: 0; transform: scale(0.5) rotate(10deg); }
      30% { opacity: 1; transform: scale(1.1) rotate(-5deg); }
      80% { opacity: 1; transform: scale(1) rotate(0deg); }
      100% { opacity: 0; transform: scale(1.2) rotate(5deg); }
  }
  .animate-level-clear-shine {
      position: relative;
      overflow: hidden;
      animation: level-clear-text-anim 2s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
  }
  @keyframes shine-sweep {
    0% { transform: translateX(-100%) skewX(-20deg); }
    100% { transform: translateX(100%) skewX(-20deg); }
  }
  .animate-level-clear-shine::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(to right, transparent 40%, rgba(255, 255, 255, 0.5) 50%, transparent 60%);
      animation: shine-sweep 1.5s ease-in-out 0.3s forwards;
  }

  @keyframes flash-burst {
    0% { transform: scale(0); opacity: 0.5; }
    50% { opacity: 1; }
    100% { transform: scale(3); opacity: 0; }
  }
  .flash-container::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 200%;
      padding-bottom: 200%;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,220,0.8) 0%, rgba(74,222,128,0) 60%);
      transform-origin: center;
      transform: translate(-50%, -50%);
      animation: flash-burst 0.8s ease-out forwards;
      pointer-events: none;
  }
  
  .animate-vignette-pulse::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, transparent 50%, rgba(239, 68, 68, 0.4) 100%);
    animation: vignette-pulse 1.5s ease-in-out infinite;
  }
  @keyframes vignette-pulse {
    0%, 100% { opacity: 0.8; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.05); }
  }

  @keyframes deluge-bg-fade-in {
    from { background-color: rgba(30, 64, 175, 0); } /* blue-800/0 */
    to { background-color: rgba(30, 64, 175, 0.4); } /* blue-800/40 */
  }
  .animate-deluge-bg {
    animation: deluge-bg-fade-in 0.5s ease-out forwards;
  }

  @keyframes shield-pulse {
    0%, 100% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.05); opacity: 1; }
  }
  .animate-shield-pulse {
    animation: shield-pulse 2s ease-in-out infinite;
  }

  @keyframes title-flicker {
    0%, 18%, 22%, 25%, 53%, 57%, 100% {
      text-shadow: 0 0 10px #06b6d4, 0 0 20px #06b6d4, 0 0 40px #0ea5e9, 0 0 80px #0ea5e9, 0 0 120px #0ea5e9;
      opacity: 1;
    }
    20%, 24%, 55% {
      text-shadow: none;
      opacity: 0.6;
    }
  }
  .animate-title-flicker {
    animation: title-flicker 3s linear infinite;
  }

  .start-screen-bg {
    background: radial-gradient(ellipse at center, #1e293b 0%, #020617 70%); /* slate-800 to slate-950 */
    animation: start-bg-pulse 10s ease-in-out infinite;
  }
  @keyframes start-bg-pulse {
    0%, 100% { background: radial-gradient(ellipse at center, #1e293b 0%, #020617 70%); }
    50% { background: radial-gradient(ellipse at center, #334155 0%, #020617 80%); } /* slate-700 */
  }

  .btn-difficulty {
    padding: 0.8rem 2rem;
    font-size: 1.5rem; /* Larger font */
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }
  .btn-secondary {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    background-image: linear-gradient(to top, #334155, #475569) !important; /* slate-700 to slate-600 */
    color: #cbd5e1; /* slate-300 */
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* New Lightning Animations */
  @keyframes lightning-draw {
      to { stroke-dashoffset: 0; }
  }
  @keyframes lightning-fade-out {
      from { opacity: 1; }
      to { opacity: 0; }
  }
  .animate-lightning-strike {
    animation: lightning-fade-out 0.4s ease-out forwards;
  }
  .animate-lightning-strike path {
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    animation: lightning-draw 0.1s linear forwards;
  }

  /* New Power-Up Animations */
  @keyframes gold-particles {
    0% { background-position: 0% 0%; }
    100% { background-position: 0% 100%; }
  }
  .animate-gold-particles {
    background-image:
      radial-gradient(circle at 20% 20%, #fcd34d44, transparent 2px),
      radial-gradient(circle at 80% 30%, #fde04744, transparent 2px),
      radial-gradient(circle at 30% 80%, #fbbf2444, transparent 3px),
      radial-gradient(circle at 70% 70%, #facc1544, transparent 2px);
    background-size: 100px 100px;
    animation: gold-particles 5s linear infinite;
  }

  @keyframes frenzy-embers {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-100vh); opacity: 0; }
  }
  .animate-frenzy-embers {
    background-image: 
      radial-gradient(circle at 10% 90%, #fb923c, transparent 2px),
      radial-gradient(circle at 50% 80%, #f97316, transparent 2px),
      radial-gradient(circle at 90% 70%, #ea580c, transparent 3px),
      radial-gradient(circle at 30% 60%, #fdba74, transparent 2px),
      radial-gradient(circle at 70% 50%, #fed7aa, transparent 1px);
    background-repeat: repeat;
    background-size: 50px 50px;
    animation: frenzy-embers 3s linear infinite;
  }

  /* New Projectile Spin Animation */
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  .animate-spin {
    animation: spin 1.5s linear infinite;
  }

  /* For ActivePowerUpsDisplay */
  .powerup-timer-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 4px;
      background: linear-gradient(to right, #0ea5e9, #67e8f9);
      transition: width 0.1s linear;
  }
  @keyframes powerup-enter {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
  }
  .animate-powerup-enter {
      animation: powerup-enter 0.3s ease-out forwards;
  }

  /* Grade Meter Styles */
  .grade-meter-bar-inner {
      transition: width 0.4s cubic-bezier(0.25, 1, 0.5, 1);
  }
  @keyframes grade-up-pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.5) rotate(-5deg); }
      100% { transform: scale(1) rotate(0deg); }
  }
  .animate-grade-up {
      animation: grade-up-pop 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
  }
  @keyframes bar-flash {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.7); }
  }
  .animate-bar-flash {
      animation: bar-flash 0.5s ease-out;
  }

</style>
</head>
<body class="bg-slate-900 text-white">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>